const { NRS_PASSWORD } = require("../_settings");

const NRS = require("../../src/index");
const NRS_SESSION = NRS.session(NRS_PASSWORD);

NRS_SESSION.connections.block();
NRS_SESSION.timers.integrate();
NRS_SESSION.connections.addDependencyAndPathsToWhiteList({

	whiteListDomains: "https://google.com",

	paths: [

	"follow-redirects",
	"node_modules/axios/lib/",

	"tests/_someMalware/httpController.js",
	"tests/_someMalware/run.js",

	],

	onlyWhited: true,

}, {

	paths: [

		'node_modules/follow-redirects/index.js',
		'node_modules/follow-redirects/index.js',
		'node_modules/follow-redirects/index.js'

	],

	fullIdentify: true,

});

NRS_SESSION.getLogsEmitter().on("*", obj => console.log(obj));

const request = require("./httpController");

request("https://google.com", function () {

	setTimeout(function () {

		request("https://google.com", function () {

			console.log("DONE!");
			process.exit(0);

		});

	}, 1000);

});
